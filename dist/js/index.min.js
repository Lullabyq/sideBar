class NavigationMenu{constructor(e){this.elem=e,this.burger=this.elem.querySelector(".burger--btn"),this.search=this.elem.querySelector(".sidebar--search"),this.widthShort=65,this.widthStandart=180,this.classes=this.elem.classList,this.fixIcon(),this.close(),window.addEventListener("resize",this.adaptSmallScreen.bind(this)),window.addEventListener("load",this.adaptSmallScreen.bind(this)),e.addEventListener("click",(e=>{if(!document.querySelector(".sidebar--active")&&e.target.closest("form")){let t=e.target.closest("form");t.classList.add("disable-transition"),this.open(),this.search.querySelector(".search__text").focus(),t.classList.remove("disable-transition")}let t=e.target.closest("button");if(!t)return;let s=t.dataset.status;s&&this[s]()})),e.addEventListener("pointerdown",(t=>{if(t.target.closest("li")){let e=t.target.closest("li").getBoundingClientRect(),s=t.clientY,i=t.clientX,a=e.left,l=e.top,c=document.createElement("span");c.className="bubble",c.style.top=s-l+"px",c.style.left=i-a+"px",t.target.closest("li").append(c)}let s=e.querySelector(".search__confirm");(t.target.closest("button")||t.target==s||"A"==t.target.tagName)&&t.preventDefault()})),document.addEventListener("pointerup",this.removeBubble.bind(this))}open(){this.classes.add("sidebar--active"),this.burger.dataset.status="close",this.adjustMain(),this.classes.contains("jsSmallScreen")&&this.classes.remove("sidebar--folded"),this.search.classList.toggle("disable-hover"),this.toggleSearch(),this.tabOptimize(),this.stopScroll()}close(){this.classes.remove("sidebar--active"),this.burger.dataset.status="open",this.adjustMain(),this.classes.contains("jsSmallScreen")&&this.classes.add("sidebar--folded"),this.search.classList.toggle("disable-hover"),this.toggleSearch(),this.tabOptimize(),this.stopScroll()}toggleSearch(){this.search.querySelectorAll("input").forEach((e=>{"submit"==e.getAttribute("type")&&(e.hidden=!e.hidden)}))}fixIcon(){let e=this.elem.querySelector(".icon--outOfFlow");e.style.left=this.widthShort/2-e.offsetWidth/2+"px"}adaptSmallScreen(){let e=this.elem.querySelectorAll(".icon--small"),t=0;this.checkSize("height",410)?e.forEach((e=>{e.classList.add("icon--"+t++)})):e.forEach((e=>{e.classList.remove("icon--"+t++)})),this.checkSize("width",690)?(this.classes.add("jsSmallScreen"),this.adjustMain(),this.classes.contains("sidebar--active")||this.classes.add("sidebar--folded")):(this.classes.remove("jsSmallScreen"),this.classes.remove("sidebar--folded"),this.adjustMain()),this.stopScroll()}removeBubble(){this.elem.querySelector(".bubble")&&this.elem.querySelector(".bubble").remove()}checkSize(e,t){switch(e){case"width":return document.documentElement.clientWidth<=t;case"height":return document.documentElement.clientHeight<=t}}adjustMain(){let e=document.querySelector("main");this.classes.contains("jsSmallScreen")?e.style.left="0px":this.classes.contains("sidebar--active")?e.style.left=this.widthStandart+"px":e.style.left=this.widthShort+"px"}tabOptimize(){let e=this.elem.querySelector(".icon--outOfFlow");this.classes.contains("sidebar--active")?e.removeAttribute("tabindex"):e.setAttribute("tabindex","2")}stopScroll(){let e=document.documentElement;this.classes.contains("jsSmallScreen")&&this.classes.contains("sidebar--active")?e.classList.add("stop__scroll"):e.classList.contains("stop__scroll")&&e.classList.remove("stop__scroll")}}let sidebar=document.querySelector(".sidebar"),menu=new NavigationMenu(sidebar);